"use strict";exports.id=415,exports.ids=[415],exports.modules={3861:(e,i,r)=>{r.d(i,{A:()=>s});let s=(0,r(2688).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4021:(e,i,r)=>{r.d(i,{A:()=>s});let s=(0,r(2688).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9415:(e,i,r)=>{r.d(i,{d:()=>T});var s=r(687),n=r(3210),l=r(6241),a=r(4934),t=r(333),d=r(9556),o=r(5629),c=r(5880),h=r(7605),x=r(3442),u=r(7826),m=r(2925),p=r(8988),j=r(214),v=r(3974);let w=c.z.object({expiryIn:c.z.string(),password:c.z.string().optional(),downloadLimit:c.z.coerce.number().int().min(0).optional(),viewLimit:c.z.coerce.number().int().min(0).optional(),allowDownload:c.z.boolean().default(!0),requireIdentification:c.z.boolean().default(!1)});function y({link:e,open:i,onOpenChange:r,onLinkUpdated:l}){let{toast:o}=(0,t.dj)(),[c,y]=(0,n.useState)(!1),f=(0,h.mN)({resolver:(0,x.u)(w),defaultValues:{expiryIn:(()=>{let i=new Date,r=Math.ceil((new Date(e.expiryTimestamp).getTime()-i.getTime())/864e5);return r<=1?"24h":r<=3?"3d":r<=7?"7d":r<=14?"14d":"30d"})(),password:"",downloadLimit:e.downloadLimit||0,viewLimit:e.viewLimit||0,allowDownload:e.allowDownload,requireIdentification:e.requireIdentification}});async function k(i){y(!0);try{let r=await (0,d.s$)(e.linkId,{expiryIn:i.expiryIn,password:i.password||void 0,downloadLimit:i.downloadLimit||void 0,viewLimit:i.viewLimit||void 0,allowDownload:i.allowDownload,requireIdentification:i.requireIdentification});l(r),o({title:"Link updated",description:"Your file link has been updated successfully."})}catch(e){console.error("Error updating link:",e),o({variant:"destructive",title:"Update failed",description:"There was a problem updating your link."})}finally{y(!1)}}return(0,s.jsx)(u.lG,{open:i,onOpenChange:r,children:(0,s.jsxs)(u.Cf,{children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsx)(u.L3,{children:"Edit Sharing Link"}),(0,s.jsx)(u.rr,{children:"Update your file sharing link settings"})]}),(0,s.jsx)(m.lV,{...f,children:(0,s.jsxs)("form",{onSubmit:f.handleSubmit(k),className:"space-y-4",children:[(0,s.jsx)(m.zB,{control:f.control,name:"expiryIn",render:({field:e})=>(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Expiry Time"}),(0,s.jsxs)(v.l6,{onValueChange:e.onChange,defaultValue:e.value,disabled:c,children:[(0,s.jsx)(m.MJ,{children:(0,s.jsx)(v.bq,{children:(0,s.jsx)(v.yv,{placeholder:"Select expiry time"})})}),(0,s.jsxs)(v.gC,{children:[(0,s.jsx)(v.eb,{value:"1h",children:"1 hour"}),(0,s.jsx)(v.eb,{value:"24h",children:"24 hours"}),(0,s.jsx)(v.eb,{value:"3d",children:"3 days"}),(0,s.jsx)(v.eb,{value:"7d",children:"7 days"}),(0,s.jsx)(v.eb,{value:"14d",children:"14 days"}),(0,s.jsx)(v.eb,{value:"30d",children:"30 days"})]})]}),(0,s.jsx)(m.Rr,{children:"When the link will expire"}),(0,s.jsx)(m.C5,{})]})}),(0,s.jsx)(m.zB,{control:f.control,name:"password",render:({field:i})=>(0,s.jsxs)(m.eI,{children:[(0,s.jsxs)(m.lR,{children:["Password ",e.hasPassword?"(Change)":"(Optional)"]}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(p.p,{type:"password",placeholder:e.hasPassword?"Enter new password":"Leave empty for no password",disabled:c,...i})}),(0,s.jsx)(m.Rr,{children:e.hasPassword?"Leave empty to keep current password":"Add password protection to your link"}),(0,s.jsx)(m.C5,{})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(m.zB,{control:f.control,name:"downloadLimit",render:({field:e})=>(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"Download Limit"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(p.p,{type:"number",min:"0",placeholder:"0 for unlimited",disabled:c,...e})}),(0,s.jsx)(m.Rr,{children:"Maximum downloads allowed"}),(0,s.jsx)(m.C5,{})]})}),(0,s.jsx)(m.zB,{control:f.control,name:"viewLimit",render:({field:e})=>(0,s.jsxs)(m.eI,{children:[(0,s.jsx)(m.lR,{children:"View Limit"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(p.p,{type:"number",min:"0",placeholder:"0 for unlimited",disabled:c,...e})}),(0,s.jsx)(m.Rr,{children:"Maximum views allowed"}),(0,s.jsx)(m.C5,{})]})})]}),(0,s.jsx)(m.zB,{control:f.control,name:"allowDownload",render:({field:e})=>(0,s.jsxs)(m.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(m.lR,{children:"Allow Download"}),(0,s.jsx)(m.Rr,{children:"Allow recipients to download the file"})]}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(j.d,{checked:e.value,onCheckedChange:e.onChange,disabled:c})})]})}),(0,s.jsx)(m.zB,{control:f.control,name:"requireIdentification",render:({field:e})=>(0,s.jsxs)(m.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(m.lR,{children:"Require Identification"}),(0,s.jsx)(m.Rr,{children:"Require recipients to identify themselves"})]}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(j.d,{checked:e.value,onCheckedChange:e.onChange,disabled:c})})]})}),(0,s.jsxs)(u.Es,{children:[(0,s.jsx)(a.$,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:c,children:"Cancel"}),(0,s.jsx)(a.$,{type:"submit",disabled:c,children:c?"Updating...":"Update Link"})]})]})})]})})}var f=r(6752),k=r(7342),b=r(615),g=r(2688);let C=(0,g.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),L=(0,g.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var N=r(4021),A=r(1158),I=r(3861),z=r(3661);let E=(0,g.A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),R=(0,g.A)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),D=(0,g.A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);var M=r(6362),S=r(9821);function T({links:e,onDelete:i,onUpdate:r}){let{toast:c}=(0,t.dj)(),[h,x]=(0,n.useState)({}),[u,m]=(0,n.useState)(null),[p,j]=(0,n.useState)(!1),v=async e=>{try{let i=window.location.origin,r=e.split("/").pop(),s=`${i}/view/${r}`;if(console.log(s),navigator?.clipboard?.writeText)await navigator.clipboard.writeText(s),c({title:"Link copied",description:"The link has been copied to your clipboard.",variant:"default"});else throw Error("Clipboard API is not available.")}catch(e){console.error("Failed to copy link:",e),c({title:"Copy failed",description:"Could not copy the link to clipboard.",variant:"destructive"})}},w=async e=>{x(i=>({...i,[e]:!0}));try{await (0,d.SV)(e),i(e),c({title:"Link deleted",description:"Your link has been deleted successfully.",variant:"default"})}catch(e){console.error("Error deleting link:",e),c({variant:"destructive",title:"Deletion failed",description:"There was a problem deleting your link."})}finally{x(i=>({...i,[e]:!1}))}},g=async i=>{x(e=>({...e,[i]:!0}));try{await (0,d.JZ)(i);let s=e.find(e=>e.linkId===i);if(s){let e={...s,status:"revoked"};r(e)}c({title:"Link Deactivated",description:"Access to this link has been disabled.",variant:"default"})}catch(e){console.error("Error revoking link:",e),c({variant:"destructive",title:"Revocation failed",description:"There was a problem revoking your link."})}finally{x(e=>({...e,[i]:!1}))}},T=async i=>{x(e=>({...e,[i]:!0}));try{await (0,d._Q)(i);let s=e.find(e=>e.linkId===i);if(s){let e={...s,status:"active"};r(e)}c({title:"Link activated",description:"Your link has been activated successfully.",variant:"default"})}catch(e){console.error("Error activating link:",e),c({variant:"destructive",title:"Activation failed",description:"There was a problem activating your link."})}finally{x(e=>({...e,[i]:!1}))}},q=e=>{m(e),j(!0)};return 0===e.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed p-8 text-center",children:[(0,s.jsx)(k.A,{className:"h-10 w-10 text-muted-foreground"}),(0,s.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"No links found"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Create links to share your files."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(f.XI,{children:[(0,s.jsx)(f.A0,{children:(0,s.jsxs)(f.Hj,{children:[(0,s.jsx)(f.nd,{children:"Link"}),(0,s.jsx)(f.nd,{children:"Expiry"}),(0,s.jsx)(f.nd,{children:"Status"}),(0,s.jsx)(f.nd,{children:"Security"}),(0,s.jsx)(f.nd,{className:"w-[100px]",children:"Actions"})]})}),(0,s.jsx)(f.BF,{children:e.map(e=>{let i=new Date(e.expiryTimestamp)<new Date,r=i?"expired":e.status;return(0,s.jsxs)(f.Hj,{children:[(0,s.jsx)(f.nA,{className:"font-medium",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(a.$,{variant:"ghost",size:"icon",onClick:()=>v(e.shareableLink),children:[(0,s.jsx)(b.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Copy link"})]}),(0,s.jsx)("span",{className:"truncate max-w-[200px]",children:e.shareableLink})]})}),(0,s.jsx)(f.nA,{children:(0,l.Yq)(e.expiryTimestamp)}),(0,s.jsx)(f.nA,{children:(0,s.jsxs)(S.E,{variant:"active"===r?"default":"revoked"===r?"destructive":"secondary",children:["active"===r&&(0,s.jsx)(C,{className:"mr-1 h-3 w-3"}),"revoked"===r&&(0,s.jsx)(L,{className:"mr-1 h-3 w-3"}),"expired"===r&&(0,s.jsx)(L,{className:"mr-1 h-3 w-3"}),r.charAt(0).toUpperCase()+r.slice(1)]})}),(0,s.jsx)(f.nA,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.hasPassword&&(0,s.jsxs)(S.E,{variant:"outline",children:[(0,s.jsx)(N.A,{className:"mr-1 h-3 w-3"}),"Password"]}),e.downloadLimit>0&&(0,s.jsxs)(S.E,{variant:"outline",children:[(0,s.jsx)(A.A,{className:"mr-1 h-3 w-3"}),e.downloadLimit]}),e.viewLimit>0&&(0,s.jsxs)(S.E,{variant:"outline",children:[(0,s.jsx)(I.A,{className:"mr-1 h-3 w-3"}),e.viewLimit]})]})}),(0,s.jsx)(f.nA,{children:(0,s.jsxs)(o.rI,{children:[(0,s.jsx)(o.ty,{asChild:!0,children:(0,s.jsxs)(a.$,{variant:"ghost",size:"icon",children:[(0,s.jsx)(z.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Actions"})]})}),(0,s.jsxs)(o.SQ,{align:"end",children:[(0,s.jsxs)(o._2,{onClick:()=>v(e.shareableLink),children:[(0,s.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Copy Link"]}),(0,s.jsxs)(o._2,{onClick:()=>q(e),children:[(0,s.jsx)(E,{className:"mr-2 h-4 w-4"}),"Edit"]}),"active"===e.status?(0,s.jsxs)(o._2,{onClick:()=>g(e.linkId),disabled:h[e.linkId],children:[(0,s.jsx)(R,{className:"mr-2 h-4 w-4"}),"Revoke"]}):(0,s.jsxs)(o._2,{onClick:()=>T(e.linkId),disabled:h[e.linkId]||i,children:[(0,s.jsx)(D,{className:"mr-2 h-4 w-4"}),"Activate"]}),(0,s.jsxs)(o._2,{onClick:()=>w(e.linkId),disabled:h[e.linkId],className:"text-destructive focus:text-destructive",children:[(0,s.jsx)(M.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},e.linkId)})})]})}),u&&(0,s.jsx)(y,{link:u,open:p,onOpenChange:j,onLinkUpdated:e=>{r(e),j(!1),m(null)}})]})}},9821:(e,i,r)=>{r.d(i,{E:()=>t});var s=r(687);r(3210);var n=r(4224),l=r(6241);let a=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function t({className:e,variant:i,...r}){return(0,s.jsx)("div",{className:(0,l.cn)(a({variant:i}),e),...r})}}};