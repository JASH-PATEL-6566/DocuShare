"use strict";exports.id=997,exports.ids=[997],exports.modules={461:(e,l,i)=>{i.d(l,{s:()=>z});var a=i(687),s=i(3210),r=i(4934),n=i(333),d=i(9556),t=i(2688);let o=(0,t.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),c=(0,t.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var h=i(7826),u=i(1273),x=i(4163),m="Progress",[p,j]=(0,u.A)(m),[f,v]=p(m),y=s.forwardRef((e,l)=>{var i,s;let{__scopeProgress:r,value:n=null,max:d,getValueLabel:t=b,...o}=e;(d||0===d)&&!C(d)&&console.error((i=`${d}`,`Invalid prop \`max\` of value \`${i}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let c=C(d)?d:100;null===n||I(n,c)||console.error((s=`${n}`,`Invalid prop \`value\` of value \`${s}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let h=I(n,c)?n:null,u=N(h)?t(h,c):void 0;return(0,a.jsx)(f,{scope:r,value:h,max:c,children:(0,a.jsx)(x.sG.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":N(h)?h:void 0,"aria-valuetext":u,role:"progressbar","data-state":k(h,c),"data-value":h??void 0,"data-max":c,...o,ref:l})})});y.displayName=m;var w="ProgressIndicator",g=s.forwardRef((e,l)=>{let{__scopeProgress:i,...s}=e,r=v(w,i);return(0,a.jsx)(x.sG.div,{"data-state":k(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...s,ref:l})});function b(e,l){return`${Math.round(e/l*100)}%`}function k(e,l){return null==e?"indeterminate":e===l?"complete":"loading"}function N(e){return"number"==typeof e}function C(e){return N(e)&&!isNaN(e)&&e>0}function I(e,l){return N(e)&&!isNaN(e)&&e<=l&&e>=0}g.displayName=w;var A=i(6241);let M=s.forwardRef(({className:e,value:l,...i},s)=>(0,a.jsx)(y,{ref:s,className:(0,A.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...i,children:(0,a.jsx)(g,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(l||0)}%)`}})}));function z({onUploadComplete:e}){let{toast:l}=(0,n.dj)(),[i,t]=(0,s.useState)(!1),[u,x]=(0,s.useState)(0),[m,p]=(0,s.useState)(null),[j,f]=(0,s.useState)(!1),v=(0,s.useRef)(null),y=async()=>{if(m){t(!0),x(0);try{let i=await (0,d.QM)(m,e=>{x(e)}),a={...i,fileType:i.fileType||m.type||"application/octet-stream",fileName:i.fileName||m.name,fileSize:i.fileSize||m.size};console.log(a),e(a),f(!1),p(null),v.current&&(v.current.value=""),l({title:"Upload complete",description:"Your file has been uploaded successfully.",variant:"default"})}catch(e){console.error("Upload error:",e),l({variant:"destructive",title:"Upload failed",description:e instanceof Error?e.message:"There was a problem uploading your file."})}finally{t(!1),x(0)}}};return(0,a.jsxs)(h.lG,{open:j,onOpenChange:f,children:[(0,a.jsx)(h.zM,{asChild:!0,children:(0,a.jsxs)(r.$,{children:[(0,a.jsx)(o,{className:"mr-2 h-4 w-4"}),"Upload File"]})}),(0,a.jsxs)(h.Cf,{children:[(0,a.jsxs)(h.c7,{children:[(0,a.jsx)(h.L3,{children:"Upload File"}),(0,a.jsx)(h.rr,{children:"Select a file to upload to your account."})]}),(0,a.jsx)("div",{className:"grid gap-4 py-4",children:(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("input",{ref:v,type:"file",className:"cursor-pointer rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium",onChange:e=>{e.target.files&&e.target.files[0]&&p(e.target.files[0])},disabled:i}),m&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Selected: ",m.name," (",Math.round(m.size/1024)," KB)"]}),i&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(M,{value:u}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground text-center",children:["Uploading... ",u,"%"]})]})]})}),(0,a.jsxs)(h.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>f(!1),disabled:i,children:"Cancel"}),(0,a.jsx)(r.$,{onClick:y,disabled:!m||i,children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading"]}):"Upload"})]})]})]})}M.displayName=y.displayName},3537:(e,l,i)=>{i.d(l,{$:()=>R});var a=i(687),s=i(3210),r=i(6241),n=i(4934),d=i(333),t=i(9556),o=i(5629),c=i(5880),h=i(7605),u=i(3442),x=i(7826),m=i(2925),p=i(8988),j=i(214),f=i(3974),v=i(615);let y=c.z.object({expiryIn:c.z.string(),password:c.z.string().optional(),downloadLimit:c.z.coerce.number().int().min(0).optional(),viewLimit:c.z.coerce.number().int().min(0).optional(),allowDownload:c.z.boolean().default(!0),requireIdentification:c.z.boolean().default(!1)});function w({file:e,open:l,onOpenChange:i,onLinkCreated:r}){let{toast:o}=(0,d.dj)(),[c,w]=(0,s.useState)(!1),[g,b]=(0,s.useState)(null),[k,N]=(0,s.useState)(null),[C,I]=(0,s.useState)(!0);if(!e||!e.fileId)return console.error("Invalid file object passed to CreateLinkDialog:",e),(0,a.jsx)(x.lG,{open:l,onOpenChange:i,children:(0,a.jsxs)(x.Cf,{className:"sm:max-w-md",children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:"Error"}),(0,a.jsx)(x.rr,{children:"Invalid file data. Please try again."})]}),(0,a.jsx)(x.Es,{children:(0,a.jsx)(n.$,{onClick:()=>i(!1),children:"Close"})})]})});let A=(0,h.mN)({resolver:(0,u.u)(y),defaultValues:{expiryIn:"7d",password:"",downloadLimit:0,viewLimit:0,allowDownload:!0,requireIdentification:!1}});async function M(l){w(!0);try{let i=await (0,t.d)({fileId:e.fileId,expiryIn:l.expiryIn,password:l.password||void 0,downloadLimit:l.downloadLimit||void 0,viewLimit:l.viewLimit||void 0,allowDownload:l.allowDownload,requireIdentification:l.requireIdentification}),a=window.location.origin,s=`${a}/view/${i.shareableLink.split("/").pop()}`;b(s),N(i),I(!1),o({title:"Link created",description:"Your file link has been created successfully.",variant:"default"})}catch(e){console.error("Error creating link:",e),o({variant:"destructive",title:"Link creation failed",description:"There was a problem creating your link."})}finally{w(!1)}}return(0,a.jsx)(x.lG,{open:l,onOpenChange:e=>{e||(b(null),N(null),I(!0)),i(e)},children:(0,a.jsx)(x.Cf,{className:"sm:max-w-md",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:"Create Sharing Link"}),(0,a.jsxs)(x.rr,{children:["Create a secure link to share your file: ",e.fileName]})]}),(0,a.jsx)(m.lV,{...A,children:(0,a.jsxs)("form",{onSubmit:A.handleSubmit(M),className:"space-y-4",children:[(0,a.jsx)(m.zB,{control:A.control,name:"expiryIn",render:({field:e})=>(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Expiry Time"}),(0,a.jsxs)(f.l6,{onValueChange:e.onChange,defaultValue:e.value,disabled:c,children:[(0,a.jsx)(m.MJ,{children:(0,a.jsx)(f.bq,{children:(0,a.jsx)(f.yv,{placeholder:"Select expiry time"})})}),(0,a.jsxs)(f.gC,{children:[(0,a.jsx)(f.eb,{value:"1h",children:"1 hour"}),(0,a.jsx)(f.eb,{value:"24h",children:"24 hours"}),(0,a.jsx)(f.eb,{value:"3d",children:"3 days"}),(0,a.jsx)(f.eb,{value:"7d",children:"7 days"}),(0,a.jsx)(f.eb,{value:"14d",children:"14 days"}),(0,a.jsx)(f.eb,{value:"30d",children:"30 days"})]})]}),(0,a.jsx)(m.Rr,{children:"When the link will expire"}),(0,a.jsx)(m.C5,{})]})}),(0,a.jsx)(m.zB,{control:A.control,name:"password",render:({field:e})=>(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Password (Optional)"}),(0,a.jsx)(m.MJ,{children:(0,a.jsx)(p.p,{type:"password",placeholder:"Leave empty for no password",disabled:c,...e})}),(0,a.jsx)(m.Rr,{children:"Add password protection to your link"}),(0,a.jsx)(m.C5,{})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(m.zB,{control:A.control,name:"downloadLimit",render:({field:e})=>(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Download Limit"}),(0,a.jsx)(m.MJ,{children:(0,a.jsx)(p.p,{type:"number",min:"0",placeholder:"0 for unlimited",disabled:c,...e})}),(0,a.jsx)(m.Rr,{children:"Maximum downloads allowed"}),(0,a.jsx)(m.C5,{})]})}),(0,a.jsx)(m.zB,{control:A.control,name:"viewLimit",render:({field:e})=>(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"View Limit"}),(0,a.jsx)(m.MJ,{children:(0,a.jsx)(p.p,{type:"number",min:"0",placeholder:"0 for unlimited",disabled:c,...e})}),(0,a.jsx)(m.Rr,{children:"Maximum views allowed"}),(0,a.jsx)(m.C5,{})]})})]}),(0,a.jsx)(m.zB,{control:A.control,name:"allowDownload",render:({field:e})=>(0,a.jsxs)(m.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(m.lR,{children:"Allow Download"}),(0,a.jsx)(m.Rr,{children:"Allow recipients to download the file"})]}),(0,a.jsx)(m.MJ,{children:(0,a.jsx)(j.d,{checked:e.value,onCheckedChange:e.onChange,disabled:c})})]})}),(0,a.jsx)(m.zB,{control:A.control,name:"requireIdentification",render:({field:e})=>(0,a.jsxs)(m.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(m.lR,{children:"Require Identification"}),(0,a.jsx)(m.Rr,{children:"Require recipients to identify themselves"})]}),(0,a.jsx)(m.MJ,{children:(0,a.jsx)(j.d,{checked:e.value,onCheckedChange:e.onChange,disabled:c})})]})}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>i(!1),disabled:c,children:"Cancel"}),(0,a.jsx)(n.$,{type:"submit",disabled:c,children:c?"Creating...":"Create Link"})]})]})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:"Create Sharing Link"}),(0,a.jsxs)(x.rr,{children:["Create a secure link to share your file: ",e.fileName]})]}),(0,a.jsxs)("div",{className:"py-4",children:[(0,a.jsx)("p",{className:"mb-2 text-sm font-medium",children:"Your link has been created:"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"rounded-md rounded-r-none bg-muted px-3 py-2 text-sm flex-1 whitespace-nowrap overflow-hidden text-ellipsis",children:(e=>{if(!e)return"";let l=e.lastIndexOf("/");if(-1===l)return e;let i=e.substring(0,l+1),a=e.substring(l+1);return a.length<=20?e:`${i}${a.substring(0,20)}....`})(g)}),(0,a.jsxs)(n.$,{size:"sm",variant:"ghost",onClick:()=>{console.log(t.d),g&&(navigator.clipboard.writeText(g),o({title:"Link copied",description:"The link has been copied to your clipboard.",variant:"default"}))},className:"h-9 rounded-l-none rounded-r-md bg-muted hover:bg-muted/80 px-3",children:[(0,a.jsx)(v.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Copy"})]})]})]}),(0,a.jsx)(x.Es,{className:"sm:justify-end",children:(0,a.jsx)(n.$,{onClick:()=>{k&&r(k),i(!1),b(null),N(null),I(!0)},className:"mt-2",children:"Done"})})]})})})}var g=i(6752),b=i(8464),k=i(2688);let N=(0,k.A)("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),C=(0,k.A)("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]),I=(0,k.A)("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]),A=(0,k.A)("FileArchive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]),M=(0,k.A)("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);var z=i(22),L=i(3661),S=i(1158),$=i(7342),q=i(6362);function R({files:e,onDelete:l,onCreateLink:i}){let{toast:c}=(0,d.dj)(),[h,u]=(0,s.useState)({}),[x,m]=(0,s.useState)(null),[p,j]=(0,s.useState)(!1),f=e=>e?e.startsWith("image/")?N:e.startsWith("audio/")?C:e.startsWith("video/")?I:"application/pdf"===e?b.A:e.includes("zip")||e.includes("compressed")?A:e.includes("html")||e.includes("javascript")||e.includes("css")?M:e.includes("text/")?z.A:b.A:b.A,v=async e=>{u(l=>({...l,[e]:!0}));try{let l=await (0,t.y_)(e),i=document.createElement("a");i.href=l.downloadUrl,i.setAttribute("download",""),document.body.appendChild(i),i.click(),document.body.removeChild(i),c({title:"Download started",description:"Your file download has started successfully.",variant:"default"})}catch(e){console.error("Error downloading file:",e),c({variant:"destructive",title:"Download failed",description:"There was a problem downloading your file."})}finally{u(l=>({...l,[e]:!1}))}},y=async e=>{u(l=>({...l,[e]:!0}));try{await (0,t.Ww)(e),l(e),c({title:"File deleted",description:"Your file has been deleted successfully.",variant:"default"})}catch(e){console.error("Error deleting file:",e),c({variant:"destructive",title:"Deletion failed",description:"There was a problem deleting your file."})}finally{u(l=>({...l,[e]:!1}))}},k=e=>{m(e),j(!0)};return 0===e.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg border border-dashed p-8 text-center",children:[(0,a.jsx)(b.A,{className:"h-10 w-10 text-muted-foreground"}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-semibold",children:"No files found"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"Upload files to get started."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(g.XI,{children:[(0,a.jsx)(g.A0,{children:(0,a.jsxs)(g.Hj,{children:[(0,a.jsx)(g.nd,{children:"Name"}),(0,a.jsx)(g.nd,{children:"Type"}),(0,a.jsx)(g.nd,{children:"Size"}),(0,a.jsx)(g.nd,{children:"Uploaded"}),(0,a.jsx)(g.nd,{className:"w-[100px]",children:"Actions"})]})}),(0,a.jsx)(g.BF,{children:e.map(e=>{let l=f(e.fileType);return(0,a.jsxs)(g.Hj,{children:[(0,a.jsx)(g.nA,{className:"font-medium",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"truncate max-w-[200px]",children:e.fileName})]})}),(0,a.jsx)(g.nA,{children:e.fileType?e.fileType.split("/")[1]||e.fileType:"Unknown"}),(0,a.jsx)(g.nA,{children:(0,r.z3)(e.fileSize)}),(0,a.jsx)(g.nA,{children:(0,r.Yq)(e.uploadTime)}),(0,a.jsx)(g.nA,{children:(0,a.jsxs)(o.rI,{children:[(0,a.jsx)(o.ty,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(L.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Actions"})]})}),(0,a.jsxs)(o.SQ,{align:"end",children:[(0,a.jsxs)(o._2,{onClick:()=>v(e.fileId),disabled:h[e.fileId],children:[(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Download"]}),(0,a.jsxs)(o._2,{onClick:()=>k(e),children:[(0,a.jsx)($.A,{className:"mr-2 h-4 w-4"}),"Create Link"]}),(0,a.jsxs)(o._2,{onClick:()=>y(e.fileId),disabled:h[e.fileId],className:"text-destructive focus:text-destructive",children:[(0,a.jsx)(q.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},e.fileId)})})]})}),x&&(0,a.jsx)(w,{file:x,open:p,onOpenChange:j,onLinkCreated:e=>{x&&i(x.fileId,e)}})]})}},8464:(e,l,i)=>{i.d(l,{A:()=>a});let a=(0,i(2688).A)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])}};